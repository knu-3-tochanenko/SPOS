<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Syntax Highlight</title>
    <link rel="stylesheet" href="style.css">
</head>
<body><span class="directive">#if</span><span class="whitespace"> </span><span class="operator">!</span><span class="identifier">canImport</span><span class="separator">(</span><span class="identifier">UIKit</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="directive">#error</span><span class="separator">(</span><span class="literal_string">"This framework requires UIKit!"</span><span class="separator">)</span><span class="whitespace">
</span><span class="directive">#endif</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_char">'a'</span><span class="whitespace"> </span><span class="error">'\'</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_char">'\''</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_char">'"'</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_string">"'"</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="error">===</span><span class="error">===</span><span class="error">===</span><span class="error">===</span><span class="error">===</span><span class="error">===</span><span class="operator">==</span><span class="whitespace">
</span><span class="operator">+=</span><span class="literal_int">2</span><span class="whitespace">
</span><span class="identifier">val</span><span class="whitespace"> </span><span class="identifier">a</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="operator">-</span><span class="literal_int">4</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_int">10912</span><span class="whitespace">
</span><span class="literal_float">1.434</span><span class="whitespace">
</span><span class="literal_float">045945.54</span><span class="whitespace">
</span><span class="literal_float">23e34</span><span class="whitespace">
</span><span class="literal_float">10e+34</span><span class="whitespace">
</span><span class="literal_float">1e-45</span><span class="whitespace">
</span><span class="literal_float">1.45e16</span><span class="whitespace">
</span><span class="literal_float">0.12e-15</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_float">0xAfA.b01p+3</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">a</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">118</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal_int">0xFFF</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="literal_float">190.0e-10</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_string">"\'"</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">a</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="operator">-</span><span class="literal_int">10</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="literal_string">"\" wow \""</span><span class="whitespace">
</span><span class="literal_string">"""
gfdf
 df dfg fd
  ""\""
  dfg
"""</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">/*Copyright (c) 2016, Andrew Walz.

 Redistribution and use in source and binary forms, with or without modification,are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the
 documentation and/or other materials provided with the distribution.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS
 BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="keyword">import</span><span class="whitespace"> </span><span class="identifier">UIKit</span><span class="whitespace"> </span><span class="operator">&>>=</span><span class="whitespace"> </span><span class="operator">++</span><span class="whitespace"> </span><span class="identifier">wow</span><span class="whitespace"> </span><span class="identifier">co</span><span class="error">+</span><span class="operator">&</span><span class="literal_int">123456789</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">//MARK: Public Protocol Declaration</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">/// Delegate for SwiftyCamButton</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="keyword">public</span><span class="whitespace"> </span><span class="keyword">protocol</span><span class="whitespace"> </span><span class="identifier">SwiftyCamButtonDelegate</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">class</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">something</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_string">#"""
    dflkgjdg
    d dflgjg

    rh


     rt
     h
     hrltj ltjlrt
     shrtl
     """#</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">something2</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_string">#"lf"L#"ldgjl\"#</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Called when UITapGestureRecognizer begins</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">buttonWasTapped</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator"><</span><span class="identifier">wow</span><span class="operator">></span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Called When UILongPressGestureRecognizer enters UIGestureRecognizerState.began</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">buttonDidBeginLongP</span><span class="error">+</span><span class="operator">-</span><span class="identifier">ress</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Called When UILongPressGestureRecognizer enters UIGestureRecognizerState.end</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">buttonDidEndLongPress</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Called when the maximum duration is reached</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">longPressDidReachMaximumDuration</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Sets the maximum duration of the video recording</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">setMaxiumVideoDuration</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="keyword">Double</span><span class="whitespace">
</span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">// MARK: Public View Declaration</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">/// UIButton Subclass for Capturing Photo and Video with SwiftyCamViewController</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="keyword">open</span><span class="whitespace"> </span><span class="keyword">class</span><span class="whitespace"> </span><span class="identifier">SwiftyCamButton</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIButton</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Delegate variable</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">public</span><span class="whitespace"> </span><span class="identifier">weak</span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">SwiftyCamButtonDelegate</span><span class="operator">?</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Sets whether button is enabled</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">public</span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">buttonEnabled</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_boolean">true</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Maximum duration variable</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">timer</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">Timer</span><span class="operator">?</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Initialization Declaration</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">override</span><span class="whitespace"> </span><span class="keyword">public</span><span class="whitespace"> </span><span class="keyword">init</span><span class="separator">(</span><span class="identifier">frame</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGRect</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">super</span><span class="operator">.</span><span class="keyword">init</span><span class="separator">(</span><span class="identifier">frame</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">frame</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">createGestureRecognizers</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Initialization Declaration</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">required</span><span class="whitespace"> </span><span class="keyword">public</span><span class="whitespace"> </span><span class="keyword">init</span><span class="operator">?</span><span class="separator">(</span><span class="identifier">coder</span><span class="whitespace"> </span><span class="identifier">aDecoder</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">NSCoder</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">super</span><span class="operator">.</span><span class="keyword">init</span><span class="separator">(</span><span class="identifier">coder</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">aDecoder</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">createGestureRecognizers</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// UITapGestureRecognizer Function</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">Tap</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">guard</span><span class="whitespace"> </span><span class="identifier">buttonEnabled</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal_boolean">true</span><span class="whitespace"> </span><span class="keyword">else</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">return</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="operator">?.</span><span class="identifier">buttonWasTapped</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// UILongPressGestureRecognizer Function</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">LongPress</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">sender</span><span class="separator">:</span><span class="identifier">UILongPressGestureRecognizer</span><span class="operator">!</span><span class="separator">)</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">guard</span><span class="whitespace"> </span><span class="identifier">buttonEnabled</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal_boolean">true</span><span class="whitespace"> </span><span class="keyword">else</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">return</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">switch</span><span class="whitespace"> </span><span class="identifier">sender</span><span class="operator">.</span><span class="identifier">state</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">case</span><span class="whitespace"> </span><span class="operator">.</span><span class="identifier">began</span><span class="separator">:</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="operator">?.</span><span class="identifier">buttonDidBeginLongPress</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">startTimer</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">case</span><span class="whitespace"> </span><span class="operator">.</span><span class="identifier">cancelled</span><span class="separator">,</span><span class="whitespace"> </span><span class="operator">.</span><span class="identifier">ended</span><span class="separator">,</span><span class="whitespace"> </span><span class="operator">.</span><span class="identifier">failed</span><span class="separator">:</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">invalidateTimer</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="operator">?.</span><span class="identifier">buttonDidEndLongPress</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">default</span><span class="separator">:</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">break</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Timer Finished</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">timerFinished</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">invalidateTimer</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="operator">?.</span><span class="identifier">longPressDidReachMaximumDuration</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">/// Start Maximum Duration Timer</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">startTimer</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">duration</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="operator">?.</span><span class="identifier">setMaxiumVideoDuration</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">//Check if duration is set, and greater than zero</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">duration</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_float">0.0</span><span class="whitespace"> </span><span class="operator">&&</span><span class="whitespace"> </span><span class="identifier">duration</span><span class="whitespace"> </span><span class="operator">></span><span class="whitespace"> </span><span class="literal_float">0.0</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">timer</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">Timer</span><span class="operator">.</span><span class="identifier">scheduledTimer</span><span class="separator">(</span><span class="identifier">timeInterval</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">duration</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">selector</span><span class="separator">:</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="error">#sely0ctor</span><span class="separator">(</span><span class="identifier">SwiftyCamButton</span><span class="operator">.</span><span class="identifier">timerFinished</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">userInfo</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">repeats</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_boolean">false</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// End timer if UILongPressGestureRecognizer is ended before time has ended</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">invalidateTimer</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">timer</span><span class="operator">?.</span><span class="identifier">invalidate</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">timer</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Add Tap and LongPress gesture recognizers</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">fileprivate</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">createGestureRecognizers</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">tapGesture</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UITapGestureRecognizer</span><span class="separator">(</span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">action</span><span class="separator">:</span><span class="whitespace"> </span><span class="directive">#selector</span><span class="separator">(</span><span class="identifier">SwiftyCamButton</span><span class="operator">.</span><span class="identifier">Tap</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">longGesture</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UILongPressGestureRecognizer</span><span class="separator">(</span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">action</span><span class="separator">:</span><span class="whitespace"> </span><span class="directive">#selector</span><span class="separator">(</span><span class="identifier">SwiftyCamButton</span><span class="operator">.</span><span class="identifier">LongPress</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">addGestureRecognizer</span><span class="separator">(</span><span class="identifier">tapGesture</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">addGestureRecognizer</span><span class="separator">(</span><span class="identifier">longGesture</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">//</span><span class="whitespace">
</span><span class="comment">//  NumberTileGame.swift</span><span class="whitespace">
</span><span class="comment">//  swift-2048</span><span class="whitespace">
</span><span class="comment">//</span><span class="whitespace">
</span><span class="comment">//  Created by Austin Zheng on 6/3/14.</span><span class="whitespace">
</span><span class="comment">//  Copyright (c) 2014 Austin Zheng. Released under the terms of the MIT license.</span><span class="whitespace">
</span><span class="comment">//</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="keyword">import</span><span class="whitespace"> </span><span class="identifier">UIKit</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="comment">/// A view controller representing the swift-2048 game. It serves mostly to tie a GameModel and a GameboardView</span><span class="whitespace">
</span><span class="comment">/// together. Data flow works as follows: user input reaches the view controller and is forwarded to the model. Move</span><span class="whitespace">
</span><span class="comment">/// orders calculated by the model are returned to the view controller and forwarded to the gameboard view, which</span><span class="whitespace">
</span><span class="comment">/// performs any animations to update its state.</span><span class="whitespace">
</span><span class="keyword">class</span><span class="whitespace"> </span><span class="identifier">NumberTileGameViewController</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIViewController</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">GameModelProtocol</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// How many tiles in both directions the gameboard contains</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">dimension</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// The value of the winning tile</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">threshold</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">board</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">GameboardView</span><span class="operator">?</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">model</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">GameModel</span><span class="operator">?</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">ScoreViewProtocol</span><span class="operator">?</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Width of the gameboard</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">boardWidth</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">230.0</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// How much padding to place between the tiles</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">thinPadding</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">3.0</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">thickPadding</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">6.0</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Amount of space to place between the different component views (gameboard, score view, etc)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">viewPadding</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">10.0</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Amount that the vertical alignment of the component views should differ from if they were centered</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">verticalViewOffset</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">0.0</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">init</span><span class="separator">(</span><span class="identifier">dimension</span><span class="whitespace"> </span><span class="identifier">d</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">threshold</span><span class="whitespace"> </span><span class="identifier">t</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">dimension</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">d</span><span class="whitespace"> </span><span class="operator">></span><span class="whitespace"> </span><span class="literal_int">2</span><span class="whitespace"> </span><span class="operator">?</span><span class="whitespace"> </span><span class="identifier">d</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">2</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">threshold</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">t</span><span class="whitespace"> </span><span class="operator">></span><span class="whitespace"> </span><span class="literal_int">8</span><span class="whitespace"> </span><span class="operator">?</span><span class="whitespace"> </span><span class="identifier">t</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">8</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">super</span><span class="operator">.</span><span class="keyword">init</span><span class="separator">(</span><span class="identifier">nibName</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">bundle</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">GameModel</span><span class="separator">(</span><span class="identifier">dimension</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">dimension</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">threshold</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">threshold</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">delegate</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">backgroundColor</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UIColor</span><span class="operator">.</span><span class="identifier">white</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">setupSwipeControls</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">required</span><span class="whitespace"> </span><span class="keyword">init</span><span class="separator">(</span><span class="identifier">coder</span><span class="whitespace"> </span><span class="identifier">aDecoder</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">NSCoder</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">fatalError</span><span class="separator">(</span><span class="literal_string">"NSCoding not supported"</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">setupSwipeControls</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">upSwipe</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizer</span><span class="separator">(</span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">action</span><span class="separator">:</span><span class="whitespace"> </span><span class="directive">#selector</span><span class="separator">(</span><span class="identifier">NumberTileGameViewController</span><span class="operator">.</span><span class="identifier">upCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="separator">:</span><span class="separator">)</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">upSwipe</span><span class="operator">.</span><span class="identifier">numberOfTouchesRequired</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">upSwipe</span><span class="operator">.</span><span class="identifier">direction</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizerDirection</span><span class="operator">.</span><span class="identifier">up</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">addGestureRecognizer</span><span class="separator">(</span><span class="identifier">upSwipe</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">downSwipe</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizer</span><span class="separator">(</span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">action</span><span class="separator">:</span><span class="whitespace"> </span><span class="directive">#selector</span><span class="separator">(</span><span class="identifier">NumberTileGameViewController</span><span class="operator">.</span><span class="identifier">downCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="separator">:</span><span class="separator">)</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">downSwipe</span><span class="operator">.</span><span class="identifier">numberOfTouchesRequired</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">downSwipe</span><span class="operator">.</span><span class="identifier">direction</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizerDirection</span><span class="operator">.</span><span class="identifier">down</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">addGestureRecognizer</span><span class="separator">(</span><span class="identifier">downSwipe</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">leftSwipe</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizer</span><span class="separator">(</span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">action</span><span class="separator">:</span><span class="whitespace"> </span><span class="directive">#selector</span><span class="separator">(</span><span class="identifier">NumberTileGameViewController</span><span class="operator">.</span><span class="identifier">leftCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="separator">:</span><span class="separator">)</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">leftSwipe</span><span class="operator">.</span><span class="identifier">numberOfTouchesRequired</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">leftSwipe</span><span class="operator">.</span><span class="identifier">direction</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizerDirection</span><span class="operator">.</span><span class="identifier">left</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">addGestureRecognizer</span><span class="separator">(</span><span class="identifier">leftSwipe</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">rightSwipe</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizer</span><span class="separator">(</span><span class="identifier">target</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">self</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">action</span><span class="separator">:</span><span class="whitespace"> </span><span class="directive">#selector</span><span class="separator">(</span><span class="identifier">NumberTileGameViewController</span><span class="operator">.</span><span class="identifier">rightCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="separator">:</span><span class="separator">)</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">rightSwipe</span><span class="operator">.</span><span class="identifier">numberOfTouchesRequired</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">rightSwipe</span><span class="operator">.</span><span class="identifier">direction</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UISwipeGestureRecognizerDirection</span><span class="operator">.</span><span class="identifier">right</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">addGestureRecognizer</span><span class="separator">(</span><span class="identifier">rightSwipe</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// View Controller</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">override</span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">viewDidLoad</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">super</span><span class="operator">.</span><span class="identifier">viewDidLoad</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">setupGame</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">reset</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">board</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="whitespace"> </span><span class="operator">&&</span><span class="whitespace"> </span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">board</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">b</span><span class="operator">.</span><span class="identifier">reset</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">reset</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">insertTileAtRandomLocation</span><span class="separator">(</span><span class="identifier">withValue</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">2</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">insertTileAtRandomLocation</span><span class="separator">(</span><span class="identifier">withValue</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">2</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">setupGame</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">vcHeight</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">bounds</span><span class="operator">.</span><span class="identifier">size</span><span class="operator">.</span><span class="identifier">height</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">vcWidth</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">bounds</span><span class="operator">.</span><span class="identifier">size</span><span class="operator">.</span><span class="identifier">width</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// This nested function provides the x-position for a component view</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">xPositionToCenterView</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">v</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIView</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">viewWidth</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">v</span><span class="operator">.</span><span class="identifier">bounds</span><span class="operator">.</span><span class="identifier">size</span><span class="operator">.</span><span class="identifier">width</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">tentativeX</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">0.5</span><span class="operator">*</span><span class="separator">(</span><span class="identifier">vcWidth</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">viewWidth</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">return</span><span class="whitespace"> </span><span class="identifier">tentativeX</span><span class="whitespace"> </span><span class="operator">>=</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace"> </span><span class="operator">?</span><span class="whitespace"> </span><span class="identifier">tentativeX</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// This nested function provides the y-position for a component view</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">yPositionForViewAtPosition</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">order</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">views</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">[</span><span class="identifier">UIView</span><span class="separator">]</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">views</span><span class="operator">.</span><span class="identifier">count</span><span class="whitespace"> </span><span class="operator">></span><span class="whitespace"> </span><span class="literal_int">0</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">order</span><span class="whitespace"> </span><span class="operator">>=</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace"> </span><span class="operator">&&</span><span class="whitespace"> </span><span class="identifier">order</span><span class="whitespace"> </span><span class="operator"><</span><span class="whitespace"> </span><span class="identifier">views</span><span class="operator">.</span><span class="identifier">count</span><span class="separator">)</span><span class="whitespace">
</span><span class="comment">//      let viewHeight = views[order].bounds.size.height</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">totalHeight</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="separator">(</span><span class="identifier">views</span><span class="operator">.</span><span class="identifier">count</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="separator">)</span><span class="operator">*</span><span class="identifier">viewPadding</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">views</span><span class="operator">.</span><span class="identifier">map</span><span class="separator">(</span><span class="separator">{</span><span class="whitespace"> </span><span class="identifier">$0</span><span class="operator">.</span><span class="identifier">bounds</span><span class="operator">.</span><span class="identifier">size</span><span class="operator">.</span><span class="identifier">height</span><span class="whitespace"> </span><span class="separator">}</span><span class="separator">)</span><span class="operator">.</span><span class="identifier">reduce</span><span class="separator">(</span><span class="identifier">verticalViewOffset</span><span class="separator">,</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace"> </span><span class="identifier">$0</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">$1</span><span class="whitespace"> </span><span class="separator">}</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">viewsTop</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_float">0.5</span><span class="operator">*</span><span class="separator">(</span><span class="identifier">vcHeight</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">totalHeight</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">>=</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace"> </span><span class="operator">?</span><span class="whitespace"> </span><span class="literal_float">0.5</span><span class="operator">*</span><span class="separator">(</span><span class="identifier">vcHeight</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">totalHeight</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Not sure how to slice an array yet</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">acc</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">for</span><span class="whitespace"> </span><span class="identifier">i</span><span class="whitespace"> </span><span class="keyword">in</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="operator">..<</span><span class="identifier">order</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">acc</span><span class="whitespace"> </span><span class="operator">+=</span><span class="whitespace"> </span><span class="identifier">viewPadding</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">views</span><span class="separator">[</span><span class="identifier">i</span><span class="separator">]</span><span class="operator">.</span><span class="identifier">bounds</span><span class="operator">.</span><span class="identifier">size</span><span class="operator">.</span><span class="identifier">height</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">return</span><span class="whitespace"> </span><span class="identifier">viewsTop</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="identifier">acc</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Create the score view</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">ScoreView</span><span class="separator">(</span><span class="identifier">backgroundColor</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIColor</span><span class="operator">.</span><span class="identifier">black</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">textColor</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIColor</span><span class="operator">.</span><span class="identifier">white</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">font</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIFont</span><span class="separator">(</span><span class="identifier">name</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_string">"HelveticaNeue-Bold"</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">size</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_float">16.0</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">??</span><span class="whitespace"> </span><span class="identifier">UIFont</span><span class="operator">.</span><span class="identifier">systemFont</span><span class="separator">(</span><span class="identifier">ofSize</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_float">16.0</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">radius</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">6</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="operator">.</span><span class="identifier">score</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_int">0</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Create the gameboard</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">padding</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">dimension</span><span class="whitespace"> </span><span class="operator">></span><span class="whitespace"> </span><span class="literal_int">5</span><span class="whitespace"> </span><span class="operator">?</span><span class="whitespace"> </span><span class="identifier">thinPadding</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">thickPadding</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">v1</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">boardWidth</span><span class="whitespace"> </span><span class="operator">-</span><span class="whitespace"> </span><span class="identifier">padding</span><span class="operator">*</span><span class="separator">(</span><span class="identifier">CGFloat</span><span class="separator">(</span><span class="identifier">dimension</span><span class="whitespace"> </span><span class="operator">+</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">width</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">CGFloat</span><span class="separator">(</span><span class="identifier">floorf</span><span class="separator">(</span><span class="identifier">CFloat</span><span class="separator">(</span><span class="identifier">v1</span><span class="separator">)</span><span class="separator">)</span><span class="separator">)</span><span class="operator">/</span><span class="identifier">CGFloat</span><span class="separator">(</span><span class="identifier">dimension</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">gameboard</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">GameboardView</span><span class="separator">(</span><span class="identifier">dimension</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">dimension</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">tileWidth</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">width</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">tilePadding</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">padding</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">cornerRadius</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">6</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">backgroundColor</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIColor</span><span class="operator">.</span><span class="identifier">black</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">foregroundColor</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIColor</span><span class="operator">.</span><span class="identifier">darkGray</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Set up the frames</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">views</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="separator">[</span><span class="identifier">scoreView</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">gameboard</span><span class="separator">]</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">var</span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="operator">.</span><span class="identifier">frame</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">f</span><span class="operator">.</span><span class="identifier">origin</span><span class="operator">.</span><span class="identifier">x</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">xPositionToCenterView</span><span class="separator">(</span><span class="identifier">scoreView</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">f</span><span class="operator">.</span><span class="identifier">origin</span><span class="operator">.</span><span class="identifier">y</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">yPositionForViewAtPosition</span><span class="separator">(</span><span class="literal_int">0</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">views</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">views</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="operator">.</span><span class="identifier">frame</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">gameboard</span><span class="operator">.</span><span class="identifier">frame</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">f</span><span class="operator">.</span><span class="identifier">origin</span><span class="operator">.</span><span class="identifier">x</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">xPositionToCenterView</span><span class="separator">(</span><span class="identifier">gameboard</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">f</span><span class="operator">.</span><span class="identifier">origin</span><span class="operator">.</span><span class="identifier">y</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">yPositionForViewAtPosition</span><span class="separator">(</span><span class="literal_int">1</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">views</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">views</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">gameboard</span><span class="operator">.</span><span class="identifier">frame</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">f</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Add to game state</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">addSubview</span><span class="separator">(</span><span class="identifier">gameboard</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">board</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">gameboard</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">view</span><span class="operator">.</span><span class="identifier">addSubview</span><span class="separator">(</span><span class="identifier">scoreView</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">scoreView</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">insertTileAtRandomLocation</span><span class="separator">(</span><span class="identifier">withValue</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">2</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">insertTileAtRandomLocation</span><span class="separator">(</span><span class="identifier">withValue</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">2</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Misc</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">followUp</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="separator">(</span><span class="identifier">userWon</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">_</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">userHasWon</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">userWon</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// TODO: alert delegate we won</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UIAlertView</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">title</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_string">"Victory"</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">message</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_string">"You won!"</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">addButton</span><span class="separator">(</span><span class="identifier">withTitle</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_string">"Cancel"</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">show</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// TODO: At this point we should stall the game until the user taps 'New Game' (which hasn't been implemented yet)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">return</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Now, insert more tiles</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">randomVal</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">(</span><span class="identifier">arc4random_uniform</span><span class="separator">(</span><span class="literal_int">10</span><span class="separator">)</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">insertTileAtRandomLocation</span><span class="separator">(</span><span class="identifier">withValue</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">randomVal</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal_int">1</span><span class="whitespace"> </span><span class="operator">?</span><span class="whitespace"> </span><span class="literal_int">4</span><span class="whitespace"> </span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_int">2</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// At this point, the user may lose</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">userHasLost</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// TODO: alert delegate we lost</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">NSLog</span><span class="separator">(</span><span class="literal_string">"You lost..."</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">UIAlertView</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">title</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_string">"Defeat"</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">message</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="literal_string">"You lost..."</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">addButton</span><span class="separator">(</span><span class="identifier">withTitle</span><span class="separator">:</span><span class="whitespace"> </span><span class="literal_string">"Cancel"</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">alertView</span><span class="operator">.</span><span class="identifier">show</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Commands</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="separator">(</span><span class="identifier">up</span><span class="separator">:</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">upCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">r</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIGestureRecognizer</span><span class="operator">!</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">queueMove</span><span class="separator">(</span><span class="identifier">direction</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">MoveDirection</span><span class="operator">.</span><span class="identifier">up</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">onCompletion</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace"> </span><span class="separator">(</span><span class="identifier">changed</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Bool</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="keyword">in</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">changed</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">followUp</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="separator">(</span><span class="identifier">down</span><span class="separator">:</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">downCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">r</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIGestureRecognizer</span><span class="operator">!</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">queueMove</span><span class="separator">(</span><span class="identifier">direction</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">MoveDirection</span><span class="operator">.</span><span class="identifier">down</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">onCompletion</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace"> </span><span class="separator">(</span><span class="identifier">changed</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Bool</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="keyword">in</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">changed</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">followUp</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="separator">(</span><span class="identifier">left</span><span class="separator">:</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">leftCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">r</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIGestureRecognizer</span><span class="operator">!</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">queueMove</span><span class="separator">(</span><span class="identifier">direction</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">MoveDirection</span><span class="operator">.</span><span class="identifier">left</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">onCompletion</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace"> </span><span class="separator">(</span><span class="identifier">changed</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Bool</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="keyword">in</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">changed</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">followUp</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="operator">@</span><span class="identifier">objc</span><span class="separator">(</span><span class="identifier">right</span><span class="separator">:</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">rightCommand</span><span class="separator">(</span><span class="identifier">_</span><span class="whitespace"> </span><span class="identifier">r</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">UIGestureRecognizer</span><span class="operator">!</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">model</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">m</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">model</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">m</span><span class="operator">.</span><span class="identifier">queueMove</span><span class="separator">(</span><span class="identifier">direction</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">MoveDirection</span><span class="operator">.</span><span class="identifier">right</span><span class="separator">,</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">onCompletion</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace"> </span><span class="separator">(</span><span class="identifier">changed</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Bool</span><span class="separator">)</span><span class="whitespace"> </span><span class="operator">-></span><span class="whitespace"> </span><span class="separator">(</span><span class="separator">)</span><span class="whitespace"> </span><span class="keyword">in</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">changed</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">self</span><span class="operator">.</span><span class="identifier">followUp</span><span class="separator">(</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="comment">// Protocol</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">scoreChanged</span><span class="separator">(</span><span class="identifier">to</span><span class="whitespace"> </span><span class="identifier">score</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">if</span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="whitespace"> </span><span class="operator">==</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">return</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">s</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">scoreView</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">s</span><span class="operator">.</span><span class="identifier">scoreChanged</span><span class="separator">(</span><span class="identifier">to</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">score</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">moveOneTile</span><span class="separator">(</span><span class="identifier">from</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">(</span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">to</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">(</span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">board</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">board</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">b</span><span class="operator">.</span><span class="identifier">moveOneTile</span><span class="separator">(</span><span class="identifier">from</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">from</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">to</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">to</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">moveTwoTiles</span><span class="separator">(</span><span class="identifier">from</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">(</span><span class="separator">(</span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="separator">(</span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">to</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">(</span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">board</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">board</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">b</span><span class="operator">.</span><span class="identifier">moveTwoTiles</span><span class="separator">(</span><span class="identifier">from</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">from</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">to</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">to</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">func</span><span class="whitespace"> </span><span class="identifier">insertTile</span><span class="separator">(</span><span class="identifier">at</span><span class="whitespace"> </span><span class="identifier">location</span><span class="separator">:</span><span class="whitespace"> </span><span class="separator">(</span><span class="keyword">Int</span><span class="separator">,</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">withValue</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">:</span><span class="whitespace"> </span><span class="keyword">Int</span><span class="separator">)</span><span class="whitespace"> </span><span class="separator">{</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">assert</span><span class="separator">(</span><span class="identifier">board</span><span class="whitespace"> </span><span class="operator">!=</span><span class="whitespace"> </span><span class="literal_null">nil</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="keyword">let</span><span class="whitespace"> </span><span class="identifier">b</span><span class="whitespace"> </span><span class="operator">=</span><span class="whitespace"> </span><span class="identifier">board</span><span class="operator">!</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="whitespace"> </span><span class="identifier">b</span><span class="operator">.</span><span class="identifier">insertTile</span><span class="separator">(</span><span class="identifier">at</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">location</span><span class="separator">,</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">:</span><span class="whitespace"> </span><span class="identifier">value</span><span class="separator">)</span><span class="whitespace">
</span><span class="whitespace"> </span><span class="whitespace"> </span><span class="separator">}</span><span class="whitespace">
</span><span class="separator">}</span><span class="whitespace">
</span></body>
</html>